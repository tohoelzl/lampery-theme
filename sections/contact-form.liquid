{% comment %}
  Contact Form Section
  Design: Passend zum Lampery Theme mit Sage/Sand/Accent Farben
{% endcomment %}

<section class="contact-section" style="--padding-top: {{ section.settings.padding_top }}px; --padding-bottom: {{ section.settings.padding_bottom }}px;">
  <div class="contact-container">

    <div class="contact-grid">

      {% comment %} Linke Seite: Kontakt-Infos {% endcomment %}
      <div class="contact-info">
        {% if section.settings.subtitle != blank %}
          <span class="contact-subtitle">{{ section.settings.subtitle }}</span>
        {% endif %}

        <h1 class="contact-title">{{ section.settings.title }}</h1>

        {% if section.settings.description != blank %}
          <p class="contact-description">{{ section.settings.description }}</p>
        {% endif %}

        <div class="contact-details">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'email' %}
                <div class="contact-detail-item" {{ block.shopify_attributes }}>
                  <div class="contact-detail-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                      <rect width="20" height="16" x="2" y="4" rx="2"/>
                      <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                    </svg>
                  </div>
                  <div class="contact-detail-content">
                    <span class="contact-detail-label">{{ block.settings.label }}</span>
                    <a href="mailto:{{ block.settings.email }}" class="contact-detail-value">{{ block.settings.email }}</a>
                  </div>
                </div>

              {% when 'phone' %}
                <div class="contact-detail-item" {{ block.shopify_attributes }}>
                  <div class="contact-detail-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                  </div>
                  <div class="contact-detail-content">
                    <span class="contact-detail-label">{{ block.settings.label }}</span>
                    <a href="tel:{{ block.settings.phone | remove: ' ' }}" class="contact-detail-value">{{ block.settings.phone }}</a>
                  </div>
                </div>

              {% when 'address' %}
                <div class="contact-detail-item" {{ block.shopify_attributes }}>
                  <div class="contact-detail-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
                      <circle cx="12" cy="10" r="3"/>
                    </svg>
                  </div>
                  <div class="contact-detail-content">
                    <span class="contact-detail-label">{{ block.settings.label }}</span>
                    <span class="contact-detail-value">{{ block.settings.address }}</span>
                  </div>
                </div>

              {% when 'hours' %}
                <div class="contact-detail-item" {{ block.shopify_attributes }}>
                  <div class="contact-detail-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"/>
                      <polyline points="12 6 12 12 16 14"/>
                    </svg>
                  </div>
                  <div class="contact-detail-content">
                    <span class="contact-detail-label">{{ block.settings.label }}</span>
                    <span class="contact-detail-value">{{ block.settings.hours }}</span>
                  </div>
                </div>
            {% endcase %}
          {% endfor %}
        </div>
      </div>

      {% comment %} Rechte Seite: Formular {% endcomment %}
      <div class="contact-form-wrapper">
        {% form 'contact', class: 'contact-form' %}

          {% if form.posted_successfully? %}
            <div class="form-success">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
              <h3>{{ section.settings.success_title }}</h3>
              <p>{{ section.settings.success_message }}</p>
            </div>
          {% else %}

            <div class="form-row">
              <div class="form-group">
                <label for="contact-name" class="form-label">{{ section.settings.name_label }} <span class="required">*</span></label>
                <input
                  type="text"
                  id="contact-name"
                  name="contact[name]"
                  class="form-input"
                  placeholder="{{ section.settings.name_placeholder }}"
                  required
                  autocomplete="name"
                >
              </div>
              <div class="form-group">
                <label for="contact-email" class="form-label">{{ section.settings.email_label }} <span class="required">*</span></label>
                <input
                  type="email"
                  id="contact-email"
                  name="contact[email]"
                  class="form-input"
                  value="{{ form.email }}"
                  placeholder="{{ section.settings.email_placeholder }}"
                  required
                  autocomplete="email"
                >
              </div>
            </div>

            <div class="form-group">
              <label for="contact-phone" class="form-label">{{ section.settings.phone_label }}</label>
              <input
                type="tel"
                id="contact-phone"
                name="contact[phone]"
                class="form-input"
                placeholder="{{ section.settings.phone_placeholder }}"
                autocomplete="tel"
              >
            </div>

            <div class="form-group">
              <label for="contact-subject" class="form-label">{{ section.settings.subject_label }}</label>
              <select id="contact-subject" name="contact[subject]" class="form-input form-select">
                <option value="">{{ section.settings.subject_placeholder }}</option>
                <option value="Allgemeine Anfrage">Allgemeine Anfrage</option>
                <option value="Bestellung">Frage zu meiner Bestellung</option>
                <option value="Produkt">Produktanfrage</option>
                <option value="Rueckgabe">Rückgabe / Umtausch</option>
                <option value="Sonstiges">Sonstiges</option>
              </select>
            </div>

            <div class="form-group">
              <label for="contact-message" class="form-label">{{ section.settings.message_label }} <span class="required">*</span></label>
              <textarea
                id="contact-message"
                name="contact[body]"
                class="form-input form-textarea"
                rows="5"
                placeholder="{{ section.settings.message_placeholder }}"
                required
              ></textarea>
            </div>

            {% if form.errors %}
              <div class="form-error">
                {{ form.errors | default_errors }}
              </div>
            {% endif %}

            <button type="submit" class="form-button">
              {{ section.settings.button_text }}
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="22" y1="2" x2="11" y2="13"/>
                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
              </svg>
            </button>

          {% endif %}
        {% endform %}
      </div>

    </div>
  </div>
</section>

<style>
  .contact-section {
    padding-top: var(--padding-top, 80px);
    padding-bottom: var(--padding-bottom, 80px);
    background-color: var(--color-background);
  }

  .contact-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  @media (min-width: 1024px) {
    .contact-container {
      padding: 0 2rem;
    }
  }

  .contact-grid {
    display: grid;
    gap: 3rem;
  }

  @media (min-width: 1024px) {
    .contact-grid {
      grid-template-columns: 1fr 1.2fr;
      gap: 4rem;
      align-items: start;
    }
  }

  /* Linke Seite: Info */
  .contact-info {
    padding-right: 0;
  }

  @media (min-width: 1024px) {
    .contact-info {
      padding-right: 2rem;
    }
  }

  .contact-subtitle {
    display: inline-block;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-primary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 1rem;
  }

  .contact-title {
    font-family: var(--font-heading-family);
    font-size: 2rem;
    font-weight: 600;
    line-height: 1.2;
    margin-bottom: 1rem;
    color: var(--color-text);
  }

  @media (min-width: 1024px) {
    .contact-title {
      font-size: 2.5rem;
    }
  }

  .contact-description {
    color: var(--color-text-muted);
    font-size: 1rem;
    line-height: 1.7;
    margin-bottom: 2rem;
  }

  .contact-details {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .contact-detail-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
  }

  .contact-detail-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    background-color: var(--color-primary);
    background-color: rgba(139, 154, 126, 0.1);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-primary);
  }

  .contact-detail-content {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .contact-detail-label {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .contact-detail-value {
    font-size: 1rem;
    color: var(--color-text);
    transition: color 0.2s ease;
  }

  a.contact-detail-value:hover {
    color: var(--color-primary);
  }

  /* Rechte Seite: Formular */
  .contact-form-wrapper {
    background-color: var(--color-background-alt);
    border-radius: 1rem;
    padding: 2rem;
  }

  @media (min-width: 768px) {
    .contact-form-wrapper {
      padding: 2.5rem;
    }
  }

  .contact-form {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .form-row {
    display: grid;
    gap: 1.25rem;
  }

  @media (min-width: 640px) {
    .form-row {
      grid-template-columns: 1fr 1fr;
    }
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--color-text);
  }

  .form-label .required {
    color: var(--color-accent);
  }

  .form-input {
    width: 100%;
    padding: 0.875rem 1rem;
    font-size: 1rem;
    color: var(--color-text);
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    outline: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  .form-input::placeholder {
    color: var(--color-text-muted);
  }

  .form-input:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(139, 154, 126, 0.15);
  }

  .form-select {
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    padding-right: 2.5rem;
  }

  .form-textarea {
    resize: vertical;
    min-height: 120px;
  }

  .form-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
    padding: 1rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    color: #ffffff;
    background-color: var(--color-accent);
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
  }

  .form-button:hover {
    background-color: var(--color-text);
    transform: translateY(-2px);
  }

  .form-button svg {
    flex-shrink: 0;
  }

  /* Success State */
  .form-success {
    text-align: center;
    padding: 2rem;
  }

  .form-success svg {
    margin: 0 auto 1.5rem;
    color: var(--color-primary);
  }

  .form-success h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--color-text);
  }

  .form-success p {
    color: var(--color-text-muted);
  }

  /* Error State */
  .form-error {
    padding: 1rem;
    background-color: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 0.5rem;
    color: #dc2626;
    font-size: 0.875rem;
  }
</style>

{% schema %}
{
  "name": "Kontaktformular",
  "class": "section-contact",
  "settings": [
    {
      "type": "header",
      "content": "Inhalt"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Untertitel",
      "default": "Kontakt"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titel",
      "default": "Schreib uns eine Nachricht"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Beschreibung",
      "default": "Hast du Fragen zu unseren Produkten oder deiner Bestellung? Wir freuen uns von dir zu hoeren und antworten so schnell wie moeglich."
    },
    {
      "type": "header",
      "content": "Formular Labels"
    },
    {
      "type": "text",
      "id": "name_label",
      "label": "Name Label",
      "default": "Name"
    },
    {
      "type": "text",
      "id": "name_placeholder",
      "label": "Name Placeholder",
      "default": "Dein Name"
    },
    {
      "type": "text",
      "id": "email_label",
      "label": "E-Mail Label",
      "default": "E-Mail"
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "E-Mail Placeholder",
      "default": "deine@email.de"
    },
    {
      "type": "text",
      "id": "phone_label",
      "label": "Telefon Label",
      "default": "Telefon (optional)"
    },
    {
      "type": "text",
      "id": "phone_placeholder",
      "label": "Telefon Placeholder",
      "default": "+49 123 456789"
    },
    {
      "type": "text",
      "id": "subject_label",
      "label": "Betreff Label",
      "default": "Betreff"
    },
    {
      "type": "text",
      "id": "subject_placeholder",
      "label": "Betreff Placeholder",
      "default": "Waehle ein Thema..."
    },
    {
      "type": "text",
      "id": "message_label",
      "label": "Nachricht Label",
      "default": "Nachricht"
    },
    {
      "type": "text",
      "id": "message_placeholder",
      "label": "Nachricht Placeholder",
      "default": "Wie koennen wir dir helfen?"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Nachricht senden"
    },
    {
      "type": "header",
      "content": "Erfolgsmeldung"
    },
    {
      "type": "text",
      "id": "success_title",
      "label": "Erfolg Titel",
      "default": "Vielen Dank!"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Erfolg Nachricht",
      "default": "Wir haben deine Nachricht erhalten und melden uns in Kuerze bei dir."
    },
    {
      "type": "header",
      "content": "Abstaende"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 80,
      "unit": "px",
      "label": "Abstand oben"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 80,
      "unit": "px",
      "label": "Abstand unten"
    }
  ],
  "blocks": [
    {
      "type": "email",
      "name": "E-Mail",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "E-Mail"
        },
        {
          "type": "text",
          "id": "email",
          "label": "E-Mail Adresse",
          "default": "info@lampery.de"
        }
      ]
    },
    {
      "type": "phone",
      "name": "Telefon",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Telefon"
        },
        {
          "type": "text",
          "id": "phone",
          "label": "Telefonnummer",
          "default": "+49 123 456789"
        }
      ]
    },
    {
      "type": "address",
      "name": "Adresse",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Adresse"
        },
        {
          "type": "textarea",
          "id": "address",
          "label": "Adresse",
          "default": "Musterstraße 123, 12345 Berlin"
        }
      ]
    },
    {
      "type": "hours",
      "name": "Oeffnungszeiten",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Erreichbarkeit"
        },
        {
          "type": "text",
          "id": "hours",
          "label": "Zeiten",
          "default": "Mo-Fr: 9-18 Uhr"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Kontaktformular",
      "category": "Content",
      "blocks": [
        { "type": "email" },
        { "type": "phone" },
        { "type": "address" },
        { "type": "hours" }
      ]
    }
  ]
}
{% endschema %}
